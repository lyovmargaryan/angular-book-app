<div>
  <button
    (click)="onShowCreateModal(showCreateModal)"
    mat-flat-button
    color="primary"
    class="uppercase"
  >
    Create New Book
    <mat-icon>add_circle</mat-icon>
  </button>
</div>

<ng-template #showCreateModal>
  <app-dialog-frame
    [customHeader]="true"
    [customFooter]="true"
    class="w-[720px] block create-discount-dialog"
  >
    <h3 header class="dialog-title !m-0">Create New Book</h3>
    <mat-icon header (click)="onClose()" class="cursor-pointer"
    >close
    </mat-icon>

    <div>
      <form [formGroup]="form">
        <div
          class="form-group grid-cols-[1fr_4fr] required grid gap-8 mb-3"
        >
          <label
            for="title"
            class="font-bold mt-4 cursor-pointer">
            Title*
          </label>
          <mat-form-field class="w-full">
            <input
              required
              matInput
              autocomplete="off"
              formControlName="title"
              id="title"
            />
            <mat-error
              *ngIf="form.get('title').invalid && (form.get('title').dirty || form.get('title').touched)">
              {{ form.get('title') | errorMessage : 'Title' }}
            </mat-error>
          </mat-form-field>
        </div>

        <div
          class="form-group grid-cols-[1fr_4fr] required grid gap-8 mb-3"
        >
          <label
            class="font-bold mt-4 cursor-pointer">
            Author*
          </label>
          <mat-form-field class="w-full">
            <mat-select formControlName="author">
              <mat-option
                *ngFor="let author of authors"
                [value]="author.name"
              >
                {{ author.name }}
              </mat-option>
            </mat-select>
            <mat-error
              *ngIf="form.get('author').invalid && (form.get('author').dirty || form.get('author').touched)">
              {{ form.get('author') | errorMessage : 'Author' }}
            </mat-error>
          </mat-form-field>
        </div>

        <div
          class="form-group grid-cols-[1fr_4fr] required grid gap-8 mb-3"
        >
          <label
            for="description"
            class="font-bold mt-4 cursor-pointer">
            Description*
          </label>
          <mat-form-field class="w-full">
            <input
              required
              matInput
              autocomplete="off"
              formControlName="description"
              id="description"
            />
            <mat-error
              *ngIf="form.get('description').invalid && (form.get('description').dirty || form.get('description').touched)">
              {{ form.get('description') | errorMessage : 'Description' }}
            </mat-error>
          </mat-form-field>
        </div>

        <div
          class="form-group grid-cols-[1fr_4fr] required grid gap-8 mb-3"
        >
          <label
            for="pages"
            class="font-bold mt-4 cursor-pointer">
            Pages*
          </label>
          <mat-form-field class="w-full">
            <input
              type="number"
              required
              matInput
              autocomplete="off"
              formControlName="pages"
              id="pages"
            />
            <mat-error
              *ngIf="form.get('pages').invalid && (form.get('pages').dirty || form.get('pages').touched)">
              {{ form.get('pages') | errorMessage : 'Pages' }}
            </mat-error>
          </mat-form-field>
        </div>

        <div
          class="form-group grid-cols-[1fr_4fr] required grid gap-8 mb-3"
        >
          <label
            class="font-bold mt-4 cursor-pointer">
            Language*
          </label>
          <mat-form-field class="w-full">
            <mat-select formControlName="language">
              <mat-option
                *ngFor="let language of bookLanguages"
                [value]="language"
              >
                {{ language | titlecase }}
              </mat-option>
            </mat-select>
            <mat-error
              *ngIf="form.get('language').invalid && (form.get('language').dirty || form.get('language').touched)">
              {{ form.get('language') | errorMessage : 'Language' }}
            </mat-error>
          </mat-form-field>
        </div>

        <div
          class="form-group grid-cols-[1fr_4fr] required grid gap-8 mb-3"
        >
          <label
            for="genre"
            class="font-bold mt-4 cursor-pointer">
            Genre*
          </label>
          <mat-form-field class="w-full">
            <input
              required
              matInput
              autocomplete="off"
              formControlName="genre"
              id="genre"
            />
            <mat-error
              *ngIf="form.get('genre').invalid && (form.get('genre').dirty || form.get('genre').touched)">
              {{ form.get('genre') | errorMessage : 'Genre' }}
            </mat-error>
          </mat-form-field>
        </div>

      </form>
    </div>

    <button (click)="onClose()" footer mat-flat-button color="">
      Cancel
    </button>
    <button
      (click)="onCreate()"
      [disabled]="form.invalid"
      footer
      mat-flat-button
      color="primary"
      class="ml-2"
    >
      Create
    </button>
  </app-dialog-frame>
</ng-template>
